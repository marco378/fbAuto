/**
 * FB Auto - Simple Cookie Authentication Test
 * Sets authentication cookie and tests API access
 */

// TEST BOOKMARKLET - Copy this line:
javascript:(function(){const token='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWdtMWZtbW0wMDAwcHAwMXFyOWFtMTliIiwiZW1haWwiOiJhc2RAZ21haWwuY29tIiwiaWF0IjoxNzYwMTcyNzkyLCJleHAiOjE3NjA3Nzc1OTJ9.8cMwfH1R2aXSlRYGB_dh34Exqu_nVpPILXSkJ-6s-xY';const setCookieForAPI=()=>{const apiFrame=document.createElement('iframe');apiFrame.style.display='none';apiFrame.src='https://fbauto-production-4368.up.railway.app/api/automation/status';document.body.appendChild(apiFrame);apiFrame.onload=()=>{try{apiFrame.contentWindow.document.cookie=`token=${token}; path=/; domain=.railway.app; secure; samesite=none`;console.log('🍪 Cookie set in API domain');setTimeout(testAPI,1000);}catch(e){console.log('❌ Cross-origin cookie setting failed:',e);alert('Cookie setting failed due to cross-origin restrictions. We need a different approach.');}};};const testAPI=async()=>{try{const response=await fetch('https://fbauto-production-4368.up.railway.app/api/jobs/client-automation',{credentials:'include',headers:{'Content-Type':'application/json'}});const data=await response.json();if(data.error){console.log('❌ API Error:',data.error);alert('API Error: '+data.error);}else{console.log('✅ API Success:',data);alert('✅ API working! Found '+data.jobs?.length+' jobs');}}catch(error){console.log('❌ API Call Failed:',error);alert('API call failed: '+error.message);}};console.log('🧪 Testing cookie authentication...');if(window.location.hostname.includes('railway.app')){document.cookie=`token=${token}; path=/; secure; samesite=none`;console.log('🍪 Cookie set directly');testAPI();}else{console.log('🔄 Setting cookie via iframe...');setCookieForAPI();}})();